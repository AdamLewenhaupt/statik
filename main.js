// Generated by CoffeeScript 1.9.3
var createAnimation;

createAnimation = function(sWidth, sHeight) {
  return setInterval((function() {
    var $effect, nx, ny, size, x, y;
    size = 320;
    nx = Math.ceil(sWidth / size);
    ny = Math.ceil(sHeight / size);
    x = Math.floor(Math.random() * nx) * size;
    y = Math.floor(Math.random() * ny) * size;
    $effect = $('<div class=\'effect\' />').offset({
      top: y,
      left: x
    }).width(size).height(size).appendTo($('.background-filter'));
    $effect.delay(1500).queue(function(next) {
      $(this).addClass('visible');
      next();
    }).delay((Math.random() + 1) * 1000).queue(function(next) {
      $(this).removeClass('visible');
      next();
    }).delay(1500).queue(function(next) {
      $(this).remove();
      next();
    });
  }), Math.random() * 100);
};

$(document).ready(function() {
  var fn, sHeight, sWidth;
  $.support.cors = true;
  sWidth = $(window).width();
  sHeight = $(window).height();
  $('.kram').height(sHeight - 400);
  fn = function(index) {
    var $filter;
    $filter = $('.background-filter');
    if (index === 2) {
      $('.effect').removeClass('visible').delay(700).queue(function(next) {
        $(this).remove();
        next();
      });
      $filter.addClass('dark').removeClass('light');
    } else if (index === 1) {
      $filter.removeClass('dark');
    } else if (index === 3) {
      $filter.addClass('light').removeClass('dark');
      $('.depth').height(sHeight - 600).css('color', 'white');
    } else if (index === 4) {
      $filter.addClass('dark').removeClass('light');
    }
  };
  $('.main').onepage_scroll({
    loop: false,
    beforeMove: fn,
    responsiveFallback: 1200
  });
  $('#test').click(function() {
    var load;
    load = {
      mail: $('#email').val()
    };
    $.post('https://script.google.com/macros/s/AKfycbyfLP2w5mGZNLkymUoWrhh_0tXG-7arDfW7RFZSPiMZjxtw8nXj/exec', load);
  });
});
